#!/usr/bin/env python3
import os
import sys

PAI_ROOT = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))

def check_keys():
    print("=== PAI API Key Check ===")
    env_path = os.path.join(PAI_ROOT, ".env")
    if not os.path.exists(env_path):
        print(" [!] Error: .env file missing. Run 'bin/pai-init' first.")
        return

    keys_to_check = ["ANTHROPIC_API_KEY", "OPENAI_API_KEY", "GOOGLE_API_KEY", "ELEVENLABS_API_KEY"]
    found_keys = {}
    with open(env_path, "r") as f:
        for line in f:
            if "=" in line:
                k, v = line.split("=", 1)
                found_keys[k.strip()] = v.strip()

    for k in keys_to_check:
        if k in found_keys:
            val = found_keys[k]
            masked = val[:6] + "..." + val[-4:] if len(val) > 10 else "***"
            print(f" [OK] {k}: {masked}")
        else:
            print(f" [MISSING] {k}")

def main():
    check_keys()

if __name__ == "__main__":
    main()
